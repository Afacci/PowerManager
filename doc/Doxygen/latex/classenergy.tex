\hypertarget{classenergy}{\section{energy Module Reference}
\label{classenergy}\index{energy@{energy}}
}


module for energy calculations.  




Collaboration diagram for energy\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=174pt]{classenergy__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
real(kind=prec) function \hyperlink{classenergy_a5ce8ae58805b4f7abe840bedaea30a00}{elprod} (c\-\_\-, t)
\begin{DoxyCompactList}\small\item\em Electrical production. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_a40ddda3c07be743826be8c2e982b9b98}{thprod} (c\-\_\-, t)
\begin{DoxyCompactList}\small\item\em Thermal production. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_a78e3e5b7396e41d13b3c9aa8f4edca48}{chprod} (c\-\_\-, t)
\begin{DoxyCompactList}\small\item\em Chilling production. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_af385040819d802e1a3c9e0c9a692ff0a}{thselfcons} (c\-\_\-, t)
\begin{DoxyCompactList}\small\item\em Internal thermal consumption of the power plant. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_af5299e75015a3803765a6b49efa22049}{elselfcons} (c\-\_\-, t)
\begin{DoxyCompactList}\small\item\em Internal electrical consumption of the power plant. \end{DoxyCompactList}\item 
real(kind=prec) function, \\*
dimension(nboi+ntrig) \hyperlink{classenergy_a07a977e68ea1d19da65ba06a4e4007a2}{fuelcons} (c\-\_\-, t)
\begin{DoxyCompactList}\small\item\em Primary energy input. \end{DoxyCompactList}\item 
real(kind=prec) function, \\*
dimension(nm) \hyperlink{classenergy_aebd116fdbb931db63a6450c7ba3197df}{energyinput} (c\-\_\-, t)
\begin{DoxyCompactList}\small\item\em Primary energy input. \end{DoxyCompactList}\item 
real(kind=prec) function, \\*
dimension(ntrig+nboi) \hyperlink{classenergy_aa9595768898cb233d53596e9ce19744f}{energyexhaust} (c\-\_\-, t)
\begin{DoxyCompactList}\small\item\em Energy exhausted by combustions equipment. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_adee2b0ef7e3ae6a8da4a2357ffa14a28}{limitrecovery} (i, valore, t)
\begin{DoxyCompactList}\small\item\em Limit the power of an H\-R\-S\-G. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_a6060381a3418f406c8ca108f9c5a7fd5}{cogthprod} (c\-\_\-, t)
\begin{DoxyCompactList}\small\item\em Cogenerative Thermal production. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_a082e1efb7fb9b51f62cfe800fefe1585}{pec} (c, t)
\begin{DoxyCompactList}\small\item\em Primary Energy Consumption. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_a85b1719a96ad6c8ccc87e720cb6b0397}{pecpenalty} (c\-New, c\-Old, t)
\begin{DoxyCompactList}\small\item\em Primary Energy Consumption Penalty at startup. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_a59e350e8898c5358a92c3475d3cedb18}{thstoragelevelupdate} (old\-Level, c, t)
\begin{DoxyCompactList}\small\item\em Updates the level of thermal storage. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_aeb92167cd5f2d93d35807c14dbac62d3}{elstoragelevelupdate} (old\-Level, c, t)
\begin{DoxyCompactList}\small\item\em Updates the level of electrical storage. \end{DoxyCompactList}\item 
real(kind=prec) function \hyperlink{classenergy_a3ffd38c81737a9ab7ac3aafc772ee08d}{tespower} (c, t)
\begin{DoxyCompactList}\small\item\em Calculates the power from or to the thermal storage. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This module contains all procedures tu calculate the enrgy fluxes inside the power plant and bertween the power plant and the clients. \begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 38 of file energy.\-f90.



\subsection{Member Function/\-Subroutine Documentation}
\hypertarget{classenergy_a78e3e5b7396e41d13b3c9aa8f4edca48}{\index{energy@{energy}!chprod@{chprod}}
\index{chprod@{chprod}!energy@{energy}}
\subsubsection[{chprod}]{\setlength{\rightskip}{0pt plus 5cm}real(kind = prec) function energy\-::chprod (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c\-\_\-, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_a78e3e5b7396e41d13b3c9aa8f4edca48}
Calculates the chilling production in k\-W of the whole power plant, for a given set-\/point Note that only trigeneration machines and Chillers produce chilling power so far. Thus chilling power is\-: \[ P_{ch} = \sum_{Trig} \frac{sp(i)\cdot P_{max}(i)\cdot k_{env}}{\eta_{el}(i,sp(i))\cdot\alpha_{env}}\eta_{ch}(i,sp(i))\cdot\beta_{env} + \sum_{Chi} sp(i)\cdot P_{max}(i)\cdot\vartheta_{env} \] where $sp(i)$ is the set point of the $i$'th machine, $\eta_{ch}$ and $\eta_{el}$ are the chilling and electrical efficiencies, respectively, and $P_{max}(i)$ is its rated power; f\$ k\-\_\-\{env\} $, $ \{env\} $, $ \{env\} $, and $ \{env\} $ are the environmental corrections for electrical power and efficiency, chilling efficiency, and chilling power, respectively. \param[in] c_ index of the given set-point to be given as input. Defines the state of the plant $(i) = sp(c\-\_\-(i)) 

Definition at line 189 of file energy.\-f90.



Referenced by constr\-::constraints(), and output().

\hypertarget{classenergy_a6060381a3418f406c8ca108f9c5a7fd5}{\index{energy@{energy}!cogthprod@{cogthprod}}
\index{cogthprod@{cogthprod}!energy@{energy}}
\subsubsection[{cogthprod}]{\setlength{\rightskip}{0pt plus 5cm}real(kind = prec) function energy\-::cogthprod (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c\-\_\-, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_a6060381a3418f406c8ca108f9c5a7fd5}
Calculates the cogenerative Thermal production in k\-W of the whole power plant, for a given set-\/point Note that only trigeneration machines and Boilers produce thermal power so far. Thus Thermal power is\-: \[ P_{th} = \sum_{Trig} \frac{sp(i)\cdot P_{max}(i)}{\eta_{el}(i,sp(i))}\eta_{th}(i,sp(i)) + \sum_{HRSG} sp(i)\cdot P_{max}(i) \] where $sp(i)$ is the set point of the $i$'th machine, $\eta_{th}$ and $\eta_{el}$ are the thermal and electrical efficiencies, respectively, and $P_{max}(i)$ is its rated power. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 592 of file energy.\-f90.



References limitrecovery().



Referenced by strategies\-::electricaltracking(), strategies\-::fullload(), strategies\-::thermaltracking(), and euristics\-::thredundant().

\hypertarget{classenergy_a5ce8ae58805b4f7abe840bedaea30a00}{\index{energy@{energy}!elprod@{elprod}}
\index{elprod@{elprod}!energy@{energy}}
\subsubsection[{elprod}]{\setlength{\rightskip}{0pt plus 5cm}real(kind = prec) function energy\-::elprod (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c\-\_\-, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_a5ce8ae58805b4f7abe840bedaea30a00}
Calculates the electrical production in k\-W of the whole power plant, for a given set-\/point Note that only trigeneration machines produce electrical power so far. Thus electrical power is\-: \[ P_{el} = \sum_{Trig} sp(i)\cdot P_{max}(i)\cdot k_{env} \] where $sp(i)$ is the set point of the $i$'th trigenerative machine and $P_{max}(i)$ is its rated power. $ k_{env} = k_a\cdot k_T \cdot k_p $ is the environmental power correction; and $ k_a$, $ k_t$, and $ k_p$ are the altitude, temperature, and pressure corrections respectively. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 59 of file energy.\-f90.



Referenced by economy\-::elrev(), economy\-::grideconomy(), output(), and pec().

\hypertarget{classenergy_af5299e75015a3803765a6b49efa22049}{\index{energy@{energy}!elselfcons@{elselfcons}}
\index{elselfcons@{elselfcons}!energy@{energy}}
\subsubsection[{elselfcons}]{\setlength{\rightskip}{0pt plus 5cm}real(kind = prec) function energy\-::elselfcons (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c\-\_\-, }
\item[{integer}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_af5299e75015a3803765a6b49efa22049}
Calculates the electrical self-\/consumption of the trigeneration plant, that is, the electrical power needed by the mechanical chillers, for a given set-\/point \[ U_{el}^{self} = \sum_{MecChi} \frac{sp(i)\cdot P_{max}(i)\cdot \vartheta_{env}}{\eta_{ch}(i,sp(i))\cdot \beta_{env}} \] where $sp(i)$ is the set point of the $i$'th machine, $\eta_{ch}$ is the chilling efficiency, and $P_{max}(i)$ is its rated power; $\beta_{env}$ and $\vartheta_{env}$ are the environmental corrections for chilling efficiency, and chilling power, respectively. The summation is extended over the nmber of mechanical chillers. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 300 of file energy.\-f90.



Referenced by strategies\-::electricaltracking(), economy\-::elrev(), strategies\-::fullload(), economy\-::grideconomy(), pec(), and strategies\-::thermaltracking().

\hypertarget{classenergy_aeb92167cd5f2d93d35807c14dbac62d3}{\index{energy@{energy}!elstoragelevelupdate@{elstoragelevelupdate}}
\index{elstoragelevelupdate@{elstoragelevelupdate}!energy@{energy}}
\subsubsection[{elstoragelevelupdate}]{\setlength{\rightskip}{0pt plus 5cm}real(kind=prec) function energy\-::elstoragelevelupdate (
\begin{DoxyParamCaption}
\item[{real(kind=prec), intent(in)}]{old\-Level, }
\item[{integer, dimension(nm), intent(in)}]{c, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_aeb92167cd5f2d93d35807c14dbac62d3}
Updates the state of charge of vthe thermal storage according to old state of charge and present set point. \[ SOC_{th}(t) = SOC_{th}(t-1) sp_{th}\cdot P_{max}\eta \] where $sp(i)$ is the set point of the thermal storage $P_{max}(i)$ is its rated power and $\eta = \eta_{in}$ if $sp \le 0$ and $\eta = \eta_{out}$ if $sp \ge 0$ 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 793 of file energy.\-f90.



Referenced by constr\-::elstorageconstr(), output(), and graphtools\-::uptimecalc().

\hypertarget{classenergy_aa9595768898cb233d53596e9ce19744f}{\index{energy@{energy}!energyexhaust@{energyexhaust}}
\index{energyexhaust@{energyexhaust}!energy@{energy}}
\subsubsection[{energyexhaust}]{\setlength{\rightskip}{0pt plus 5cm}real(kind = prec) function, dimension(ntrig+nboi) energy\-::energyexhaust (
\begin{DoxyParamCaption}
\item[{integer, dimension(ntrig+nboi), intent(in)}]{c\-\_\-, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_aa9595768898cb233d53596e9ce19744f}
Calculates the energy exhausted by trigenerative equipment and fuel boilers. \[ E_{exh}(i) = sp(i)\cdot P_{max}(i)\cdot k_{env} \left[\frac{1}{\eta(i,sp(i))\cdot \alpha_{env}} - 1 \right] \] where $sp(i)$ is the set point of the $i$'th machine, $\eta(i,sp(i)) = \eta_{el}(i,sp(i))$ for trigenerative equipment and $\eta(i,sp(i))=\eta_{th}(i,sp(i))$ for boilers and, and $P_{max}(i)$ is their rated power. $k_{env}$ and $\alpha_{env}$ represent the environmental corrections 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 482 of file energy.\-f90.

\hypertarget{classenergy_aebd116fdbb931db63a6450c7ba3197df}{\index{energy@{energy}!energyinput@{energyinput}}
\index{energyinput@{energyinput}!energy@{energy}}
\subsubsection[{energyinput}]{\setlength{\rightskip}{0pt plus 5cm}real(kind = prec) function, dimension(nm) energy\-::energyinput (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c\-\_\-, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_aebd116fdbb931db63a6450c7ba3197df}
Calculates the primary energy input of the trigeneration plant, for a given set-\/point \[ E_{in}(i) = \frac{sp(i)\cdot P_{max}(i)\cdot k_{env} }{\eta(i,sp(i))\cdot \alpha_{env}} \] where $sp(i)$ is the set point of the $i$'th machine, $\eta(i,sp(i)) = \eta_{el}(i,sp(i))$ for trigenerative equipment and $\eta(i,sp(i))=\eta_{th}(i,sp(i))$ for boilers and, and $P_{max}(i)$ is their rated power. $k_{env}$ and $\alpha_{env}$ represent the environmental corrections 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 417 of file energy.\-f90.



Referenced by output(), pec(), and pecpenalty().

\hypertarget{classenergy_a07a977e68ea1d19da65ba06a4e4007a2}{\index{energy@{energy}!fuelcons@{fuelcons}}
\index{fuelcons@{fuelcons}!energy@{energy}}
\subsubsection[{fuelcons}]{\setlength{\rightskip}{0pt plus 5cm}real(kind = prec) function, dimension(nboi+ntrig) energy\-::fuelcons (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c\-\_\-, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_a07a977e68ea1d19da65ba06a4e4007a2}
Calculates the eprimary energy input of the trigeneration plant, for a given set-\/point \[ E_{in}(i) = \frac{sp(i)\cdot P_{max}(i)\cdot k_{env}}{\eta(i,sp(i))\cdot \alpha_{env}} \] where $sp(i)$ is the set point of the $i$'th machine, $\eta(i,sp(i)) = \eta_{el}(i,sp(i))$ for trigenerative equipment and $\eta(i,sp(i))=\eta_{th}(i,sp(i))$ for boilers and, and $P_{max}(i)$ is their rated power. $k_{env}$ and $\alpha_{env}$ represent the environmental corrections for power and efficiency respectively. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 359 of file energy.\-f90.



Referenced by economy\-::fuelcost(), and output().

\hypertarget{classenergy_adee2b0ef7e3ae6a8da4a2357ffa14a28}{\index{energy@{energy}!limitrecovery@{limitrecovery}}
\index{limitrecovery@{limitrecovery}!energy@{energy}}
\subsubsection[{limitrecovery}]{\setlength{\rightskip}{0pt plus 5cm}real(kind = prec) function energy\-::limitrecovery (
\begin{DoxyParamCaption}
\item[{integer, intent(in)}]{i, }
\item[{real(kind = prec), intent(in)}]{valore, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_adee2b0ef7e3ae6a8da4a2357ffa14a28}
Limit the power of an H\-R\-S\-G according to the maximum input power coming from the topping plant. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em i} & index of the H\-R\-S\-G being considered \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\mbox{\tt in}  & {\em valore} & maximum value of the input energy. \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 533 of file energy.\-f90.



Referenced by cogthprod(), and thprod().

\hypertarget{classenergy_a082e1efb7fb9b51f62cfe800fefe1585}{\index{energy@{energy}!pec@{pec}}
\index{pec@{pec}!energy@{energy}}
\subsubsection[{pec}]{\setlength{\rightskip}{0pt plus 5cm}real(kind=prec) function energy\-::pec (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_a082e1efb7fb9b51f62cfe800fefe1585}
This function calculates the primary energy consumption of the power plant according to the relation\-: \[ PEC = dt(t)\sum_{Trig+Boi} \frac{sp(i)dd\cdot P_{max}(i)}{\eta(i,sp(i))}pef_{fuel}(i)) + P_{grid}pef_{grid}dt(t) \] where $sp(i)$ is the set point of the $i$'th machine, $\eta = \eta_{th}$ for boilers and $\eta = \eta_{el}$ for trigenerative equipments; pef\-\_\-\{fuel\}(i) is the primary energy factor relative to the fuels used by the i'th machine. P\-\_\-\{grid\} is the electrical power exchanged with the grid and pef\-\_\-\{grid\} is its primary energy factor. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 656 of file energy.\-f90.



References elprod(), elselfcons(), and energyinput().



Referenced by globalresults\-::globpec(), objfunction(), and output().

\hypertarget{classenergy_a85b1719a96ad6c8ccc87e720cb6b0397}{\index{energy@{energy}!pecpenalty@{pecpenalty}}
\index{pecpenalty@{pecpenalty}!energy@{energy}}
\subsubsection[{pecpenalty}]{\setlength{\rightskip}{0pt plus 5cm}real(kind=prec) function energy\-::pecpenalty (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c\-New, }
\item[{integer, dimension(nm), intent(in)}]{c\-Old, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_a85b1719a96ad6c8ccc87e720cb6b0397}
This function calculates the primary energy consumption penalty at 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 697 of file energy.\-f90.



References energyinput().



Referenced by globalresults\-::globpec(), graphtools\-::grapharcs(), and output().

\hypertarget{classenergy_a3ffd38c81737a9ab7ac3aafc772ee08d}{\index{energy@{energy}!tespower@{tespower}}
\index{tespower@{tespower}!energy@{energy}}
\subsubsection[{tespower}]{\setlength{\rightskip}{0pt plus 5cm}real(kind=prec) function energy\-::tespower (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_a3ffd38c81737a9ab7ac3aafc772ee08d}
This function calculates the power from and to the thermal storage system, given the plant set-\/point vector and the time-\/step state of charge and present set point. \[ P_{tes}(t) = sp_{tes}\cdot P_{max}\eta_{in}\qquad \mbox{ if } \qquad sp_{tes} \le 0 \] \[ P_{tes}(t) = sp_{tes}\cdot P_{max}eta_{out} \qquad\mbox{ if } \qquad sp_{tes} > 0 \] where $sp_{tes}$ is the set point of the thermal storage $P_{max}$ is its rated power and $\eta_{in}$ and $\eta_{out}$ are the input and output efficiencies, respectively. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 838 of file energy.\-f90.



Referenced by strategies\-::fullload().

\hypertarget{classenergy_a40ddda3c07be743826be8c2e982b9b98}{\index{energy@{energy}!thprod@{thprod}}
\index{thprod@{thprod}!energy@{energy}}
\subsubsection[{thprod}]{\setlength{\rightskip}{0pt plus 5cm}real(kind = prec) function energy\-::thprod (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c\-\_\-, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_a40ddda3c07be743826be8c2e982b9b98}
Calculates the Thermal production in k\-W of the whole power plant, for a given set-\/point Note that only trigeneration machines and Boilers produce thermal power so far. Thus Thermal power is\-: \[ P_{th} = \sum_{Trig} \frac{sp(i)\cdot P_{max}(i)\cdot k_{env}}{\eta_{el}(i,sp(i))\cdot \alpha_{env}}\eta_{th}(i,sp(i))\cdot\gamma_{env}+ \sum_{Boi} sp(i)\cdot P_{max}(i)\cdot \lambda_{env} \] where $sp(i)$ is the set point of the $i$'th machine, $\eta_{th}$ and $\eta_{el}$ are the thermal and electrical efficiencies, respectively, and $P_{max}(i)$ is its rated power; $ k_{env} $, $ \alpha_{env} $, $ \gamma_{env} $, and $ \lambda_{env} $ are the environmental corrections for electrical power and efficiency, thermal efficiency, and thermal power, respectively. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 112 of file energy.\-f90.



References limitrecovery().



Referenced by constr\-::constraints(), strategies\-::electricaltracking(), output(), and strategies\-::thermaltracking().

\hypertarget{classenergy_af385040819d802e1a3c9e0c9a692ff0a}{\index{energy@{energy}!thselfcons@{thselfcons}}
\index{thselfcons@{thselfcons}!energy@{energy}}
\subsubsection[{thselfcons}]{\setlength{\rightskip}{0pt plus 5cm}real(kind = prec) function energy\-::thselfcons (
\begin{DoxyParamCaption}
\item[{integer, dimension(nm), intent(in)}]{c\-\_\-, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_af385040819d802e1a3c9e0c9a692ff0a}
Calculates the thermal self-\/consumption of the trigeneration plant, that is, hte thermal power needed by the absorbtion chillers. \[ U_{th}^{self} = \sum_{AbsChi} \frac{sp(i)\cdot P_{max}(i)\cdot \vartheta_{env}}{\eta_{ch}(i,sp(i))\cdot \beta_{env}} \] where $sp(i)$ is the set point of the $i$'th machine, $\eta_{ch}$ is the chilling efficiency, and $P_{max}(i)$ is its rated power; $\beta_{env}$ and $\vartheta_{env}$ are the environmental corrections for chilling efficiency, and chilling power, respectively. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 242 of file energy.\-f90.



Referenced by constr\-::constraints(), strategies\-::electricaltracking(), strategies\-::fullload(), strategies\-::thermaltracking(), and euristics\-::thredundant().

\hypertarget{classenergy_a59e350e8898c5358a92c3475d3cedb18}{\index{energy@{energy}!thstoragelevelupdate@{thstoragelevelupdate}}
\index{thstoragelevelupdate@{thstoragelevelupdate}!energy@{energy}}
\subsubsection[{thstoragelevelupdate}]{\setlength{\rightskip}{0pt plus 5cm}real(kind=prec) function energy\-::thstoragelevelupdate (
\begin{DoxyParamCaption}
\item[{real(kind=prec), intent(in)}]{old\-Level, }
\item[{integer, dimension(nm), intent(in)}]{c, }
\item[{integer, intent(in)}]{t}
\end{DoxyParamCaption}
)}}\label{classenergy_a59e350e8898c5358a92c3475d3cedb18}
Updates the state of charge of the thermal storage according to old state of charge and present set point. \[ SOC_{th}(t) = SOC_{th}(t-1) sp_{th}\cdot P_{max}\eta \] where $sp(i)$ is the set point of the thermal storage $P_{max}(i)$ is its rated power and $\eta = \eta_{in}$ if $sp \le 0$ and $\eta = \eta_{out}$ if $sp \ge 0$ 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\-\_\-} & index of the given set-\/point to be given as input. Defines the state of the plant $sp(i) = sp(c\_(i))$ \\
\hline
\mbox{\tt in}  & {\em t} & time index \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Andrea Facci 
\end{DoxyAuthor}


Definition at line 749 of file energy.\-f90.



Referenced by strategies\-::fullload(), output(), constr\-::thstorageconstr(), and graphtools\-::uptimecalc().



The documentation for this module was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
/home/\-Codici/\-Blink/\-Power\-Manager/src/\hyperlink{energy_8f90}{energy.\-f90}\end{DoxyCompactItemize}
